# 編譯器設計程式作業4

### 作業描述

The goal of our project this semester is to develop a prototype C compiler. This is done by compiling C programs into embedded platforms such as 68K, MIPS, ARM, or pseudo assemblies. In this class we will use LLVM IR ([https://llvm.org /docs/LangRef.html](https://llvm.org /docs/LangRef.html)) as the target codes. The project is divided into several parts including language definition, lexical analyzer, C-grammar, symbol table handlings, parser, and code generation. In the final assignment, you will need to choose proper language features which you want to develop in this course, and complete the whole compiler (including the code generator). In your hand-in report, you need to have the followings: 
- To define the subset of the language which you want to choose from C. 
- Give a set of testing programs and the generated LLVM-IR files, which can illustrate the features of your testing programs. (at least 3 test programs) 
- Use the “ANTLR” to help you develop your compiler. 
- You can use C, C++, or Java to write your compiler. (Java is recommended) 
- Your C subset should at least contain the following features: 
  - Integer data types: int - Statements for arithmetic computation. (e.g., a=b+2*(100-1);) 
  - Comparison expression. (e.g., a > b) 
  - if-then / if-then-else program constructs.
  - printf() function with one/two parameters. (support types: %d) printf("%d\n", var); printf("Hello\n"); 

Please turn in the following files to eCourse2: 

-  A file describes your language which is a subset of C language. (MS-WORD file) 

- The source codes: 

  - Your compiler 

    (a) ANTLR grammar file, myCompiler.g. 

    (b) A program to call your parser, myCompiler_test. 

  - Testing programs (.c) and the corresponding LLVM IR codes (.ll) generated by your compiler. (at least 3 programs) 
  - A readme file (pure text file) describes the features of your compiler and explains how to compile and execute your compiler. 
  - Makefile

請將上述的檔案打包壓縮存成 tar.bz2 之格式，檔名為 prj4_<學號>.tar.bz2 檔 (例如: prj4_401234567.tar.bz2，上傳到 eCourse2。

### 如何編譯：

1. 將這些檔案解壓縮後與antlr官網下載下來的（或是資料夾內的也可以）antlr-3.5.2-complete.jar放在同一資料夾裡
2. 在此資料夾執行「make」指令

### 如何執行：

在此資料夾裡執行如下指令。

測試程式1：
	java -cp ./antlr-3.5.2-complete.jar:. myCompiler_test test1.c > test1.ll
	
	llc test1.ll
	
	gcc -o test1 -no-pie -Iincludes test1.s
	
	./test1

測試程式2：
	java -cp ./antlr-3.5.2-complete.jar:. myCompiler_test test2.c > test2.ll
		
	llc test2.ll
	
	gcc -o test2 -no-pie -Iincludes test2.s
	
	./test2

測試程式3：
	java -cp ./antlr-3.5.2-complete.jar:. myCompiler_test test3.c > test3.ll
	
	llc test3.ll
	
	gcc -o test3 -no-pie -Iincludes test3.s
	
	./test3

之後結果就會印在終端機裡。
